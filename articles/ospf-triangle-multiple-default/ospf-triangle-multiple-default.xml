<?xml version='1.0'?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN"
        "/usr/share/xml/docbook/schema/dtd/5.0/docbook.dtd" [

<!ENTITY author         SYSTEM "author.xml">
<!ENTITY legal          SYSTEM "legal.xml">

<!ENTITY r1-zebra       SYSTEM "files/r1-zebra.conf">
<!ENTITY r1-ospfd       SYSTEM "files/r1-ospfd.conf">
<!ENTITY r2-zebra       SYSTEM "files/r2-zebra.conf">
<!ENTITY r2-ospfd       SYSTEM "files/r2-ospfd.conf">
<!ENTITY r3-zebra       SYSTEM "files/r3-zebra.conf">
<!ENTITY r3-ospfd       SYSTEM "files/r3-ospfd.conf">

<!ENTITY % inetdoc_urls SYSTEM 'inetdoc.urls.xml'>
%inetdoc_urls;
]>

<article xml:lang='fr' xml:id='ospf-triangle-multiple-default'>
<info>
  <title>Aire OSPF et passerelles multiples</title>

  &author;
  <abstract>
  <para>Cet article est une illustration des fonctions de routage avancées sur
  les systèmes GNU/Linux. À partir d'une topologie de travaux pratiques
  comprenant trois routeurs en «triangle» dans une aire <acronym>OSPF</acronym>
  et un quatrième routeur représentant un hypothétique opérateur, il couvre les
  notions de répartition de trafic (<wordasword>load balancing</wordasword>) et
  de tolérance aux pannes réseau (<wordasword>failover</wordasword>).</para>
  </abstract>
  <keywordset>
    <keyword>failover</keyword>
    <keyword>inetdoc</keyword>
    <keyword>iproute</keyword>
    <keyword>Linux</keyword>
    <keyword>load balancing</keyword>
    <keyword>ospf</keyword>
    <keyword>quagga</keyword>
    <keyword>wireshark</keyword>
  </keywordset>
</info>

<section xml:id='ospf-triangle-multiple-default.legal.meta'>
  &legal;
  <section xml:id='ospf-triangle-multiple-default.meta'>
    <title>Méta-information</title>

  <para>Cet article est écrit avec <link
  xlink:href="http://www.docbook.org"><citetitle>DocBook</citetitle></link> XML
  sur un système <link xlink:href="http://www.debian.org"><citetitle>Debian
  GNU/Linux</citetitle></link>. Il est disponible en version imprimable au
  format PDF : <link
  xlink:href="http://www.inetdoc.net/pdf/__printbasename__"><literal>__printbasename__</literal></link>.</para>
  </section>
</section>

<section xml:id='ospf-triangle-multiple-default.presentation'>
  <title>Présentation de la topologie réseau étudiée</title>

  <para>En fait, cet article fait suite à la rédaction du support
  &url.interco.cs; dans lequel on constitue une agrégation de topologies
  <wordasword>Hub and Spoke</wordasword> avec les douze postes d'une salle de
  travaux pratiques. Chacun des <wordasword>Hubs</wordasword> est interconnecté
  avec deux autres routeurs dans une aire <acronym>OSPF</acronym>. Cet ensemble
  de routeurs dispose de deux liens montant vers l'Internet.</para>

  <para>Vu de l'aire <acronym>OSPF</acronym>, la diffusion d'une route par
  défaut via le protocole de routage dynamique se fait à l'aide de
  l'instruction <userinput>default-information originate</userinput>. Cette
  instruction est présentée à la page <link
  xlink:href='&url.interco.ospf.default;'>Publication d'une route par défaut
  via OSPF</link> du support <link
  xlink:href='&url.interco.ospf.answers;'><citetitle>Routage dynamique avec
  OSPF</citetitle></link>.</para>

  <para>La situation devient un peu plus <emphasis>intéressante</emphasis>
  lorsque cette aire <acronym>OSPF</acronym> dispose de plusieurs portes de
  sortie vers les autres réseaux. En vis-à-vis de ces routeurs de bordure le
  routeur du niveau supérieur doit être capable d'acheminer correctement les
  flux sortant et entrant de l'aire. Voici une représentation de la topologie
  logique en question.</para>

  <mediaobject>
    <imageobject role='fo'>
    <imagedata format='PNG' fileref='images/interco.ospf.multiple-gw.png' width='12cm' scalefit='1' />
    </imageobject>
    <imageobject role='html'>
    <imagedata format='PNG' fileref='images/interco.ospf.multiple-gw.png' width='640px' scalefit='1' />
    </imageobject>
    <textobject>
    <phrase>Topologie logique avec deux routeurs OSPF de bordure.</phrase>
    </textobject>
  </mediaobject>

  <para>Cette topologie reprend très exactement la disposition en triangle
  présentée dans le support <link
  xlink:href='&url.interco.ospf.answers;'><citetitle>Routage dynamique avec
  OSPF</citetitle></link>. L'utilisation du routage inter-VLAN sert à mettre en
  évidence la dissociation entre une topologie physique en étoile issue des
  définitions de la technologie Ethernet et une topologie logique en triangle
  dans laquelle chaque routeur doit apprendre au moins un réseau via ses
  voisins.</para>

  <para>À la topologie initiale de travaux pratiques, on a adjoint un réseau
  local supplémentaire dans lequel on trouve un hôte baptisé
  <citetitle>host</citetitle> (avec beaucoup d'originalité) ainsi que le fameux
  routeur de niveau supérieur baptisé <citetitle>ISP</citetitle> pour
  <wordasword>Internet Service Provider</wordasword>. Dans tous les tests
  l'hôte est la source et la destination du trafic routé et la configuration du
  routeur <citetitle>ISP</citetitle> fait l'objet de toute l'attention de cet
  article.</para>
</section>

<section xml:id='ospf-triangle-multiple-default.conclusion'>
  <title>Pour conclure</title>

  <para>Voilà comment on illustre quelques notions de routage avancé avec
  quatre instances de machines virtuelles.</para>
</section>

<appendix xml:id='ospf-triangle-multiple-default.zebra'>
  <title>Configuration du routage statique et dynamique</title>

  <para>Les configurations des démons <systemitem
  class='daemon'>zebra</systemitem> des trois routeurs sont données ci-dessous.
  La seule particularité de ces configurations tient à la définition des bandes
  passantes sur chaque interface. Ces bandes passantes sont utilisées par les
  démons <systemitem class='daemon'>ospfd</systemitem> pour calculer les
  métriques de chacun des liens.</para>

  <informaltable frame='none'>
    <tgroup cols='3'>
    <colspec colwidth='1*'/>
    <colspec colwidth='1*'/>
    <colspec colwidth='1*'/>
    <tbody>
    <row>
    <entry valign='top'><screen>&r1-zebra;</screen></entry>
    <entry valign='top'><screen>&r2-zebra;</screen></entry>
    <entry valign='top'><screen>&r3-zebra;</screen></entry>
    </row>
    </tbody>
    </tgroup>
  </informaltable>

  <para>Les configurations des démons <systemitem
  class='daemon'>ospfd</systemitem> des trois routeurs sont données ci-dessous.</para>

  <informaltable frame='none'>
    <tgroup cols='3'>
    <colspec colwidth='1*'/>
    <colspec colwidth='1*'/>
    <colspec colwidth='1*'/>
    <tbody>
    <row>
    <entry valign='top'><screen>&r1-ospfd;</screen></entry>
    <entry valign='top'><screen>&r2-ospfd;</screen></entry>
    <entry valign='top'><screen>&r3-ospfd;</screen></entry>
    </row>
    </tbody>
    </tgroup>
  </informaltable>
</appendix>
</article>
