<?xml version='1.0'?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN"
	"/usr/share/xml/docbook/schema/dtd/5.0/docbook.dtd"[

<!ENTITY author		SYSTEM "author.xml">
<!ENTITY legal		SYSTEM "legal.xml">

<!-- inetdoc -->
<!ENTITY % inetdoc_urls SYSTEM 'inetdoc.urls.xml'>
%inetdoc_urls;

<!ENTITY url.github-scripts
	"<link xmlns='http://docbook.org/ns/docbook'
	xlink:href='https://github.com/platu/inetdoc/tree/master/guides/vm/files'>inetdoc -> guides -> vm -> files</link>">

<!-- openvswitch -->
<!ENTITY url.ovs
	"<link xmlns='http://docbook.org/ns/docbook'
	xlink:href='http://openvswitch.org'>Open vSwitch</link>">

<!ENTITY url.cam
	'<link xmlns="http://docbook.org/ns/docbook" xlink:href="https://en.wikipedia.org/wiki/Content-addressable_memory">
	<citetitle>Content-addressable memory</citetitle></link>'>

<!ENTITY url.svi
	'<link xmlns="http://docbook.org/ns/docbook" xlink:href="https://en.wikipedia.org/wiki/Switch_virtual_interface">
	<citetitle>Switch virtual interface</citetitle></link>'>
]>

<article xml:id='interco.ovs' xml:lang='fr'>

<info>
	<title>Virtualisation des fonctions réseau</title>

	&author;
	<abstract>
	<para>
	<informaltable frame='none' pgwide='1'>
	<tgroup cols='2' align='left' colsep='0' rowsep='0'>
	<colspec colwidth='5*'/>
	<colspec colwidth='220px'/>
	<tbody>
    <row>
    <entry valign='top'>
	<para>L'objectif de ce support de travaux pratiques est d'illustrer la
	virtualisation de la commutation et du routage dynamique avec
	<acronym>OSPF</acronym>. Comme dans les supports précédents de la série, on
	retrouve le routage inter VLAN dans la topologie choisie pour la mise en
	œuvre.</para>
	</entry>
	<entry>
	<inlinemediaobject>
	<imageobject role='html'>
		<imagedata fileref='images/ovs-vm.png' format='PNG' width='220px' scalefit='1'/>
	</imageobject>
	<imageobject role='fo'>
		<imagedata fileref='images/ovs-vm.png' format='PNG' width='4.5cm' scalefit='1'/>
	</imageobject>
	</inlinemediaobject>
	</entry>
	</row>
	</tbody>
	</tgroup>
	</informaltable>
	</para>
	</abstract>

	<keywordset>
	<keyword>kvm</keyword>
	<keyword>openvswitch</keyword>
	<keyword>ospf</keyword>
	<keyword>qemu</keyword>
	<keyword>quagga</keyword>
	<keyword>routage</keyword>
	<keyword>trunk</keyword>
	<keyword>vlan</keyword>
	<keyword>zebra</keyword>
	</keywordset>
</info>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.legal.meta'>
	&legal;

	<sect2 xml:id='interco.ovs.meta'>
		<title>Méta-information</title>
    
	<para>Ce document est écrit avec <link
	xlink:href="http://www.docbook.org"><citetitle>DocBook</citetitle></link>
	XML sur un système <link
	xlink:href="https://www.debian.org"><citetitle>Debian
	GNU/Linux</citetitle></link>. Il est disponible en version imprimable au
	format PDF : <link
	xlink:href="https://www.inetdoc.net/pdf/__printbasename__"><literal>__printbasename__</literal></link>.</para>

	<para>Toutes les commandes utilisées dans ce document ne sont pas
	spécifiques à une version particulière des systèmes UNIX ou GNU/Linux.
	C'est la distribution <citetitle>Debian GNU/Linux</citetitle> qui est
	utilisée pour les tests présentés. Voici une liste des paquets contenant
	les commandes :</para>

	<itemizedlist>
	<listitem>
		<para><application>procps</application> - Utilitaires pour le système
		de fichiers /proc</para>
	</listitem>
	<listitem>
		<para><application>iproute2</application> - Outils de contrôle du
		trafic et du réseau</para>
	</listitem>
	<listitem>
		<para><application>ifupdown</application> - Outils de haut niveau pour
		configurer les interfaces réseau</para>
	</listitem>
	<listitem>
		<para><application>openvswitch-switch</application> - Open vSwitch
		switch implementations</para>
	</listitem>
	<listitem>
		<para><application>quagga</application> - BGP/OSPF/RIP routing
		daemon</para>
	</listitem>
	</itemizedlist>
	</sect2>

	<sect2 xml:id='interco.ovs.convtypo'>
		<title>Conventions typographiques</title>

	<para>Tous les exemples d'exécution des commandes sont précédés d'une
	invite utilisateur ou <wordasword>prompt</wordasword> spécifique au niveau
	des droits utilisateurs nécessaires sur le système.</para>

	<itemizedlist>
	<listitem>
		<para>Toute commande précédée de l'invite <prompt>$</prompt> ne
		nécessite aucun privilège particulier et peut être utilisée au niveau
		utilisateur simple.</para>
	</listitem>
	<listitem>
		<para>Toute commande précédée de l'invite <prompt>#</prompt> nécessite
		les privilèges du super-utilisateur.</para>
	</listitem>
	</itemizedlist>
	</sect2>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.archi'>
	<title>Architecture réseau étudiée</title>

	<para>L'architecture réseau étudiée dans ce support de travaux pratiques
	évolue par étapes successives. On débute par la transformation du poste de
	travail en système hôte avec hyperviseur et commutateur. On implante
	ensuite deux instances de routeurs virtuels qui utilisent le protocole
	<acronym>OSPF</acronym>. Enfin, on implante une instance de serveur web
	avec lequel on étudie un scénario de tolérances aux pannes basé sur le
	protocole de routage.</para>

	<bridgehead xmlns:xlink="http://www.w3.org/1999/xlink"
	renderas="sect2">Accès à Internet</bridgehead>

	<para>Le raccordement au réseau	d'interconnexion avec les routeurs de
	l'infrastructure de travaux pratiques donne accès à Internet. Il est donc
	important de préserver la connexion à l'un des deux commutateurs de couche
	distribution suivants.</para>
  
	<itemizedlist>
	<listitem>
		<para><systemitem>dsw2.infra.stri</systemitem> en salle 211</para>
	</listitem>
	<listitem>
		<para><systemitem>dsw1.infra.stri</systemitem> en salle 213</para>
	</listitem>
	</itemizedlist>

	<para>Les liens montants doivent être configurés en mode
	<wordasword>trunk</wordasword> en utilisant le <acronym>VLAN</acronym>
	natif numéro 1. Le réseau <acronym>IP</acronym> correspondant au
	<acronym>VLAN</acronym> numéro 1 a pour préfixes réseau : <systemitem
	class='ipaddress'>172.16.0.0/20</systemitem> et <systemitem
	class='ipaddress'>2001:db8:feb2:1::/64</systemitem>.</para>

	<para>Point important, la lecture de la section «Plan d'adressage» du
	document &url.infra.tp; donne l'adresse des deux routeurs connectés à
	l'Internet.</para>

	<para>De plus, on utilisera aussi les adresses <acronym>IPv4</acronym> et
	<acronym>IPv6</acronym> de ces deux routeurs comme
	<wordasword>resolver</wordasword> <acronym>DNS</acronym>.</para>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.host-prepare'>
	<title>Préparation du système hôte</title>

	<para>La première étape consiste à transformer le poste de travaux
	pratiques en système hôte avec une configuration réseau basée sur le
	commutateur &url.ovs;.</para>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Quels sont les paquets à installer pour gérer les
		instances de machines virtuelles ?</phrase></para>

		<para>Après avoir identifié les fonctions de virtualisation du
		matériel, installer les outils de l'espace utilisateur pour la
		virtualisation. Le principal outil est le paquet de la famille
		<systemitem>qemu</systemitem> associé à l'architecture
		<trademark>Intel</trademark>.</para>
	</question>
	<answer>
	<itemizedlist>
	<listitem>
		<para>On commence par vérifier que le processeur du futur système hôte
		dispose bien des fonctions de virtualisation en consultant la liste des
		indicateurs du processeur.</para>

<screen><prompt>$</prompt> egrep '(vmx|svm)' /proc/cpuinfo</screen>
	</listitem>
	<listitem>
		<para>Si l'un des deux indicateur est présent, le noyau de la
		distribution aura chargé automatiquement les modules correspondants
		lors de sont initialisation. On recherche donc le nom de l'hyperviseur
		Linux dans la liste des modules.</para>

<screen><prompt>$</prompt> lsmod | grep kvm</screen>
	</listitem>
	<listitem>
		<para>On installe les outils nécessaires au pilotage des instances de
		machines virtuelles.</para>

<screen><prompt>#</prompt> aptitude install qemu-system-x86 spice-client-gtk</screen>
	</listitem>
	</itemizedlist>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les droits à attribuer à l'utilisateur normal
		pour lui donner accès à l'hyperviseur et à la virtualisation
		?</phrase></para>

		<para>Rechercher une entrée dédiée à la virtualisation dans
		l'arborescence système associée aux périphériques.</para>
	</question>
	<answer>
		<para>Si les modules de l'hyperviseur sont bien chargés, une entrée
		spécifique a été créée dans l'arborescence <filename
		class='directory'>/dev</filename>.	Cette entrée permet d'identifier le
		groupe système dédié à la virtualisation.</para>

<screen><prompt>$</prompt> ls -l /dev/kvm
crw-rw----+ 1 root <emphasis>kvm</emphasis> 10, 232 nov.   2 16:23 /dev/kvm</screen>

		<para>L'utilisateur normal doit faire partie du groupe système
		<systemitem>kvm</systemitem> pour accéder aux ressources.</para>

<screen><prompt>#</prompt> adduser etu kvm</screen>

		<warning>
		<para>L'attribution de l'accès n'est pas immédiate. Soit on procède à
		un redémarrage système, soit on doit déconnecter/reconnecter
		l'utilisateur et décharger/recharger les modules de
		l'hyperviseur.</para>
		</warning>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelle est l'opération à effectuer pour récupérer une
		image <wordasword>master</wordasword> de système virtuel
		?</phrase></para>

		<para>Consulter le dossier <filename class='directory'>files</filename>
		du service web de l'infrastructure de travaux pratiques :
		http://www.stri/files.</para>
	</question>
	<answer>
<screen><prompt>$</prompt> mkdir vm &amp;&amp; cd vm
<prompt>$</prompt> wget http://www.stri/files/vm0-debian-testing-i386-base.qed</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment obtenir une copie des scripts de gestion des
		systèmes virtuels proposés en annexe du guide &url.vm;
		?</phrase></para>

		<para>Le dépôt <citetitle>GitHub</citetitle> du site
		<citetitle>inetdoc.net</citetitle> permet de télécharger directement
		les <wordasword>shell scripts</wordasword> utiles. On y accède en
		suivant le chemin suivant : &url.github-scripts;.</para>

		<para>Deux scripts sont nécessaires : <command>ovs-startup.sh</command>
		et <command>diff-img.sh</command>.</para>
	</question>
	<answer>
		<para>Après téléchargement des fichiers en utilisant le mode
		<option>RAW</option> de la page du site <citetitle>GitHub</citetitle>,
		on les rend exécutables.</para>

<screen><prompt>:~/vm$</prompt> chmod +x *.sh
<prompt>:~/vm$</prompt> ls -lh
total 2,3G
-rwxr-xr-x 1 etu etu  280 nov.   2 18:15 diff-img.sh
-rwxr-xr-x 1 etu etu 1,7K nov.   2 18:16 ovs-startup.sh
-rw-r--r-- 1 etu etu 2,3G nov.   2 18:01 vm0-debian-testing-i386-base.qed</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quel est le paquet à installer pour implanter un
		commutateur &url.ovs; ?</phrase></para>

		<para>Rechercher dans la liste des paquets relatifs à <citetitle>Open
		vSwitch</citetitle> celui qui offre la fonction de commutation.</para>
	</question>
	<answer>
<screen><prompt>#</prompt> aptitude install openvswitch-switch</screen>
	</answer>
	</qandaentry>
<!--

allow-dsw-host eth0
iface eth0 inet manual
        pre-up ip link set txqueuelen 10000 dev $IFACE
        up ip link set dev $IFACE up
        down ip link set dev $IFACE down
        ovs_bridge dsw-host
        ovs_type OVSPort

# The primary network interface
allow-ovs dsw-host
iface dsw-host inet manual
        ovs_type OVSBridge
        ovs_ports eth0 vlan1
# sudo ovs-vsctl add-br dsw-host

allow-dsw-host vlan1
iface vlan1 inet static
        address 172.16.1.10/20
        gateway 172.16.0.4
        ovs_type OVSIntPort
        ovs_bridge dsw-host
        dns-nameservers 172.16.0.4
        up ip link set txqueuelen 500 dev $IFACE
        up tc qdisc add dev $IFACE root pfifo_fast
-->
	</qandaset>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.host-net-reconf'>
	<title>Reconfiguration réseau du système hôte</title>

	<para>Avant de passer à la virtualisation on reconfigure l'accès réseau du
	système hôte de façon à utiliser le commutateur &url.ovs; comme interface
	principale.</para>

	<para>Les questions de cette section doivent être traitées à l'aide de
	l'article &url.inter-vlan-routing-openvswicth;.</para>

	<para>Le nouveau plan d'adressage des postes de travaux pratiques est donné
	dans le tableau ci-dessous. Il suppose que les postes soient physiquement
	raccordés à un commutateur de l'armoire de brassage de la salle sur un port
	en mode <wordasword>trunk</wordasword> ayant pour <acronym>VLAN</acronym>
	natif le <acronym>VLAN</acronym> numéro 1.</para>

	<table xml:id='interco.ovs.host-net-reconf.addressing' frame='all' pgwide='1'>
		<title>Adressage des systèmes hôtes</title>
	<tgroup cols='2' align='left' colsep='1' rowsep='1'>
		<colspec colnum='1' colwidth='1*'/>
		<colspec colnum='2' colwidth='1*'/>
	<thead>
	<row>
		<entry>Système hôte</entry>
		<entry>Interface SVI</entry>
	</row>
	</thead>
	<tbody>
	<row>
		<entry morerows='1' valign='middle'>alderaan</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.10/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:a/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>bespin</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.11/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:b/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>centares</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.12/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:c/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>coruscant</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.13/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:d/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>dagobah</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.14/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:e/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>endor</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.15/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:f/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>felucia</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.16/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:10/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>geonosis</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.17/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:11/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>hoth</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.18/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:12/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>mustafar</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.19/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:13/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>naboo</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.20/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:14/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>tatooine</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.21/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:15/64</systemitem></entry>
	</row>
	</tbody>
	</tgroup>
	</table>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Comment effacer la configuration de l'interface physique
		<option>eth0</option> ?</phrase></para>
	</question>
	<answer>
<screen><prompt>#</prompt> ifdown eth0</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment créer un commutateur ?</phrase></para>

		<para>On appellera ce commutateur <systemitem>dsw-host</systemitem>
		dans la suite des manipulations.</para>
	</question>
	<answer>
<screen><prompt>#</prompt> ovs-vsctl add-br dsw-host</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment ajouter l'interface physique
		<option>eth0</option> comme port du commutateur
		<systemitem>dsw-host</systemitem> ? Quel doit être l'état de cette
		interface physique pour que les communications soient possibles
		?</phrase></para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment créer une interface de type
		<acronym>SVI</acronym> (&url.svi;) ?</phrase></para>

		<para>On appellera cette interface <systemitem>vlan1</systemitem> dans
		la suite des manipulations.</para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelles sont les opérations à effectuer pour configurer
		cette interface avec les adresses <acronym>IPv4</acronym> et
		<acronym>IPv6</acronym> données dans le tableau ci-dessus
		?</phrase></para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Est-ce que les communications réseau sont fonctionnelles
		en l'état ?</phrase></para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment activer le routage au niveau du sous-système
		réseau du système hôte ?</phrase></para>
	</question>
	</qandaentry>
	</qandaset>

	<para>Maintenant que les communications réseau entre le système hôte et les
	routeurs de l'infrastructure de travaux pratiques sont active, on peut
	passer au test de la virtualisation.</para> 
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.host-vm-test'>
	<title>Test d'une première machine virtuelle</title>

	<para>Dans cette section, on valide le fonctionnement de la virtualisation
	sur le système hôte en lançant une instance de système virtuel à partir de
	l'image <wordasword>master</wordasword> téléchargée précédemment.</para>

	<para>Les questions de cette section doivent être traitées à l'aide de
	l'article &url.inter-vlan-routing-openvswicth;.</para>

	<para>La première instance utilise le même <acronym>VLAN</acronym> que le
	système hôte. Le plan d'adressage donné dans la section précédente est
	complété par les adresses <acronym>IPv4</acronym> et
	<acronym>IPv6</acronym> de l'interface de la machine virtuelle.</para>

	<table xml:id='interco.ovs.host-vm-test.addressing' frame='all' pgwide='1'>
		<title>Adressage des systèmes hôtes</title>
	<tgroup cols='2' align='left' colsep='1' rowsep='1'>
		<colspec colnum='1' colwidth='1*'/>
		<colspec colnum='2' colwidth='1*'/>
	<thead>
	<row>
		<entry>Système hôte</entry>
		<entry>Interface SVI sur le vlan 1 (natif)</entry>
	</row>
	</thead>
	<tbody>
	<row>
		<entry morerows='1' valign='middle'>alderaan</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.10/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:a/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>bespin</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.11/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:b/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>centares</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.12/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:c/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>coruscant</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.13/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:d/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>dagobah</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.14/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:e/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>endor</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.15/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:f/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>felucia</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.16/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:10/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>geonosis</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.17/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:11/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>hoth</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.18/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:12/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>mustafar</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.19/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:13/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>naboo</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.20/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:14/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>tatooine</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.21/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:15/64</systemitem></entry>
	</row>
	</tbody>
	</tgroup>
	</table>

	<table xml:id='interco.ovs.host-vm-test.cabling' frame='all' pgwide='1'>
		<title>Numérotation des cordons de brassage des systèmes virtuels</title>
	<tgroup cols='3' align='left' colsep='1' rowsep='1'>
		<colspec colnum='1' colwidth='1*'/>
		<colspec colnum='2' colwidth='1*'/>
		<colspec colnum='3' colwidth='1*'/>
	<thead>
	<row>
		<entry>Système hôte</entry>
		<entry>Brassage Routeur 1</entry>
		<entry>Brassage Routeur 2</entry>
	</row>
	</thead>
	<tbody>
	<row>
		<entry valign='middle'>alderaan</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap11</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap12</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>bespin</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap13</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap14</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>centares</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap15</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap16</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>coruscant</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap17</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap18</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>dagobah</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap19</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>felucia</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap21</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap22</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>geonosis</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap23</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>hoth</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap25</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap26</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>mustafar</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap27</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap28</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>naboo</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap30</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'>tatooine</entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap31</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>tap32</systemitem></entry>
	</row>
	</tbody>
	</tgroup>
	</table>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Comment créer un cordon de brassage ? Quel est le type
		d'interface utilisé ?</phrase></para>

		<para>La numérotation des «cordons de brassage» virtuels doit respecter
		le tableau ci-dessus et être conservée tout au long des
		manipulations.</para>
	</question>
	<answer>
		<para>Ce sont les interfaces de type <systemitem>tap</systemitem> qui
		représentent les cordons de brassage entre le commutateur et les
		machines virtuelles.</para>

<screen><prompt>$</prompt> sudo ip tuntap add mode tap dev tap0 group kvm
<prompt>$</prompt> sudo ip link set dev tap0 up</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment raccorder ce cordon de brassage au commutateur
		<systemitem>dsw-host</systemitem> et créer le port correspondant
		?</phrase></para>

		<para>Comme ce port utilise le même <acronym>VLAN</acronym> natif que
		le système hôte, il n'est pas nécessaire de lui affecter un mode
		particulier sachant qu'il fonctionne en mode
		<wordasword>trunk</wordasword> par défaut.</para>
    </question>
	<answer>
		<para>On créé un port en mode <wordasword>trunk</wordasword> dans
		lequel toutes les trames sans étiquette <acronym>IEEE 802.1q</acronym>
		appartiennent au <acronym>VLAN</acronym> natif.</para>

<screen><prompt>$</prompt> sudo ovs-vsctl add-port dsw-host vlan1 -- set interface vlan1 type=internal
<prompt>$</prompt> sudo ovs-vsctl set port vlan1 vlan_mode=native-untagged
<prompt>$</prompt> sudo tc qdisc add dev vlan1 root pfifo_fast
<prompt>$</prompt> sudo ip link set dev vlan1 up</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment lancer l'instance de système virtuel à l'aide du
		script <command>ovs-startup.sh</command> ?</phrase></para>

		<para>Consulter le code du script et identifier les paramètres à
		utiliser.</para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment visualiser la table <acronym>CAM</acronym> du
		commutateur <systemitem>dsw-host</systemitem> ?</phrase></para>

		<para>Vérifier que l'adresse <acronym>MAC</acronym> définie dans le
		script <command>ovs-startup.sh</command> est bien présente en vis-à-vis
		d'un port du commutateur.</para>
	</question>
	<answer>
		<para>C'est avec l'outil <command>ovs-appctl</command> que l'on
		consulte la table d'association des adresses <acronym>MAC</acronym>
		avec les numéros de port et de <acronym>VLAN</acronym>.</para>

		<screen><prompt>$</prompt> sudo ovs-appctl fdb/show dsw-host</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment accéder à la console de l'instance de machine
		virtuelle via <acronym>SSH</acronym> même si celle-ci n'a pas de
		configuration réseau correcte ?</phrase></para>

		<para>Utiliser le voisinage réseau du domaine de diffusion pour repérer
		l'adresse de lien local <acronym>IPv6</acronym>.</para>
	</question>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelles sont les opérations à réaliser pour appliquer la
		configuration réseau avec les adresses <acronym>IPv4</acronym> et
		<acronym>IPv6</acronym> ?</phrase></para>

		<para>Faire une série de tests <acronym>ICMP</acronym> et utiliser le
		gestionnaire de paquets pour mettre à jour le système
		<wordasword>maste</wordasword>.</para>
	</question>
	</qandaentry>
	</qandaset>

	<para>Une fois que la première instance de système virtuel est correctement
	configurée et à jour, on peut l'arrêter et passer à la mise en place de la
	maquette de routage <acronym>OSPF</acronym>.</para>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.ospf-triangle'>
	<title>Maquette de routage OSPF</title>

	<para>Tout comme dans le support de travaux pratiques
		&url.interco.ospf-bird;, nous allons utiliser une topologie logique en
		triangle pour illustrer la	configuration du routage dynamique.</para>

	<para>On utilise le système hôte comme routeur <acronym>OSPF</acronym>
	situé à un sommet du triangle. Dans ce scénario, il faut créer une
	interface <acronym>SVI</acronym> en mode accès pour les deux
	<acronym>VLAN</acronym>s (côtés du triangle) à desservir.</para>

	<para>On utilise deux instances de système virtuels comme routeurs situés
	aux deux autres sommets du triangle. Chacun de ces deux routeurs est
	raccordé au commutateur <systemitem>dsw-host</systemitem> par une interface
	en mode <wordasword>trunk</wordasword> qui dessert deux
	<acronym>VLAN</acronym>s.</para>

	<para>Les questions de cette section doivent être traitées à l'aide de
		l'article &url.inter-vlan-routing-openvswicth; et de la section
		virtualisation du support &url.interco.ospf-bird;.</para>

	<para>Voici le plan d'adressage à utiliser.</para>

	<table xml:id='interco.ovs.ospf-triangle.addressing' frame='all' pgwide='1'>
		<title>Adressage du système hôte (SVI) et des machines
		virtuelles</title>
	<tgroup cols='5' align='left' colsep='1' rowsep='1'>
		<colspec colnum='1' colwidth='2*'/>
		<colspec colnum='2' colwidth='1*'/>
		<colspec colnum='3' colwidth='4*'/>
		<colspec colnum='4' colwidth='4*'/>
		<colspec colnum='5' colwidth='4*'/>
	<thead>
	<row>
		<entry>Système hôte</entry>
		<entry>VLAN</entry>
		<entry>Interface SVI</entry>
		<entry>Routeur R1</entry>
		<entry>Routeur R2</entry>
	</row>
	</thead>
	<tbody>
	<row>
		<entry morerows='7' valign='middle'>alderaan</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.10/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:a/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>220</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.220.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.220.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:dc::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:dc::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>221</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.221.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.221.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:dd::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:dd::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>250</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.50.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.50.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fa::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fa::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>bespin</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.11/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:b/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>222</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.222.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.222.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:de::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:de::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>223</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.223.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.223.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:df::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:df::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>251</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.51.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.51.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fb::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fb::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>centares</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.12/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:c/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>224</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.224.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.224.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e0::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e0::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>225</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.225.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.225.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e1::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e1::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>252</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.52.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.52.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fc::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fc::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>coruscant</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.13/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:d/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>226</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.226.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.226.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e2::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e2::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>227</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.227.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.227.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e3::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e3::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>253</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.53.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.53.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fd::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fd::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>dagobah</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.14/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:e/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>228</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.228.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.228.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e4::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e4::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>229</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.229.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.229.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e5::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e5::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>254</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.54.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.54.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fe::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:fe::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>endor</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.15/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:f/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>230</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.230.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.230.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e6::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e6::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>231</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.231.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.231.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e7::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e7::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>255</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.55.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.55.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ff::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ff::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>felucia</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.16/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:10/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>232</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.232.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.232.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e8::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e8::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>233</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.233.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.233.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e9::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:e9::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>256</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.56.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.56.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:100::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:100::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>geonosis</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.17/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:11/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>234</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.234.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.234.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ea::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ea::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>235</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.235.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.235.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:eb::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:eb::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>257</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.57.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.57.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:101::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:101::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>hoth</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.18/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:12/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>236</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.236.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.236.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ec::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ec::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>237</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.237.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.237.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ed::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ed::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>258</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.58.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.58.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:102::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:102::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>mustafar</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.19/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:13/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>238</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.238.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.238.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ee::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ee::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>239</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.239.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.239.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ef::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:ef::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>259</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.59.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.59.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:103::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:103::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>naboo</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.20/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:14/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>240</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.240.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.240.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f0::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f0::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>241</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.241.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.241.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f1::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f1::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>260</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.60.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.60.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:104::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:104::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='7' valign='middle'>tatooine</entry>
		<entry morerows='1' valign='middle'>1</entry>
		<entry valign='middle'><systemitem class='ipaddress'>172.16.1.21/20</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:1::1:15/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>242</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.242.1/29</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.242.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f2::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f2::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>243</entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.243.1/29</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.1.243.2/29</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f3::1/64</systemitem></entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:f3::2/64</systemitem></entry>
	</row>
	<row>
		<entry morerows='1' valign='middle'>261</entry>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.61.1/24</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>10.2.61.2/24</systemitem></entry>
	</row>
	<row>
		<entry valign='middle'> </entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:105::1/64</systemitem></entry>
		<entry valign='middle'><systemitem class='ipaddress'>2001:db8:feb2:105::2/64</systemitem></entry>
	</row>
	</tbody>
	</tgroup>
	</table>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.ovs.refdocs'>
	<title>Documents de référence</title>

	<variablelist>
	<varlistentry xml:id='interco.ovs.refdocs.archi-tp'>
		<term><citetitle>Architecture réseau des travaux pratiques</citetitle></term>
	<listitem>
		<para>Le support &url.infra.tp;  présente la topologie physique des
		salles de travaux pratiques avec la &url.infra.tp.cabling; ainsi que
		les configurations par défaut des équipements. On y trouve aussi le
		plan d'adressage <acronym>IP</acronym> utilisé avec les autres supports
		de travaux pratiques, le plan de numérotations des
		<acronym>VLAN</acronym>s et les affectations des groupes de ports des
		commutateurs.</para>
	</listitem>
	</varlistentry>

	<varlistentry xml:id='interco.ovs.refdocs.config-interface-lan'>
		<term><citetitle>Configuration d'une interface réseau</citetitle></term>
	<listitem>
		<para>Le support &url.config.interface.lan; présente les opérations de
		configuration d'une interface réseau et propose quelques
		manipulations sur les protocoles de la pile
		<acronym>TCP/IP</acronym></para>
	</listitem>
	</varlistentry>

	<varlistentry xml:id='interco.ovs.refdocs.inter-vlan'>
		<term><citetitle>Introduction au routage inter-VLAN</citetitle></term>
	<listitem>
		<para>Le support &url.inter-vlan-routing; introduit le principe du
		routage inter-VLAN ainsi que ses conditions d'utilisation. C'est aussi
		un support de travaux pratiques dans lequel on n'utilise que du routage
		statique et de la traduction d'adresses sources
		(<acronym>S-NAT</acronym>) pour acheminer le trafic utilisateur entre
		les différents réseaux.</para>
	</listitem>
	</varlistentry>

	<varlistentry xml:id='interco.ovs.refdocs.vm'>
		<term><citetitle>Virtualisation système et enseignement</citetitle></term>
	<listitem>
		<para>Le support &url.vm; présente la solution de virtualisation
		intégrée au noyau Linux : <acronym>KVM</acronym>. Associée au
		commutateur &url.ovs;, cette solution permet de construire des
		maquettes de travaux pratiques très complètes en offrant de nombreuses
		fonctions réseau «réelles» dont une table &url.cam;.</para>
	</listitem>
	</varlistentry>
	</variablelist>
</sect1>
</article>
